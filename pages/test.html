<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Child Age Selector</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>
    <div class="container mt-5">
        <form asp-action="SubmitReservation" method="post">
            <div class="row">
                <div class="col-md-12 mb-3">
                    <label for="SelectedDate">Gitmek İstediğiniz Dönem</label>
                    <select class="form-select" name="SelectedDate">
                        <option selected>14 Ağustos 2025, Perşembe - 20 Ağustos 2025</option>
                        <option>21 Ağustos 2025, Perşembe - 27 Ağustos 2025</option>
                    </select>
                </div>
            </div>

            <div class="mb-3">
                <h6>1. Oda</h6>
                <div class="row g-2">
                    <div class="col-md-6">
                        <label for="Adults">Yetişkin (12+)</label>
                        <select class="form-select w-100" name="Adults">
                            <option>1</option>
                            <option selected>2</option>
                            <option>3</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="Kids">Çocuk Sayısı</label>
                        <select class="form-select w-100" id="Kids" name="Kids">
                            <option value="0" selected>0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>

                <!-- Generated child age selects -->
                <div class="row mt-3" id="childAgesContainer"></div>

                <button type="button" class="btn btn-info text-white btn-sm mt-2">Yeni Oda Ekle +</button>
            </div>

            <button type="submit" class="btn btn-dark w-100">Müsaitlik Sorgula</button>
        </form>
    </div>

    <!-- JavaScript: Place this at the bottom to ensure DOM is loaded -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const childCountSelect = document.getElementById("Kids");
            const childAgesContainer = document.getElementById("childAgesContainer");

            childCountSelect.addEventListener("change", function () {
                const count = parseInt(this.value);
                childAgesContainer.innerHTML = ""; 

                for (let i = 0; i < count; i++) {
                    const col = document.createElement("div");
                    col.className = "col-md-4 mb-2";

                    const label = document.createElement("label");
                    label.innerText = `Çocuk ${i + 1} Yaşı`;

                    const select = document.createElement("select");
                    select.name = `KidAges[${i}]`; 
                    select.className = "form-select w-100";

                    for (let age = 2; age <= 12; age++) {
                        const option = document.createElement("option");
                        option.value = age;
                        option.text = `${age}`;
                        select.appendChild(option);
                    }

                    col.appendChild(label);
                    col.appendChild(select);
                    childAgesContainer.appendChild(col);
                }
            });
        });
    </script>
</body>

</html>